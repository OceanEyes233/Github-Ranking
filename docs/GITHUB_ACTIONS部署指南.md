# GitHub Actions éƒ¨ç½²æŒ‡å—

ä½¿ç”¨ GitHub Actions å¯ä»¥**å®Œå…¨å…è´¹**åœ°è®©è„šæœ¬æ¯å¤©è‡ªåŠ¨è¿è¡Œï¼Œæ— éœ€æœ¬åœ°ç”µè„‘æˆ–æœåŠ¡å™¨ï¼

## ğŸ¯ ä¼˜åŠ¿

- âœ… å®Œå…¨å…è´¹
- âœ… æ— éœ€ä¿æŒç”µè„‘å¼€æœº
- âœ… è‡ªåŠ¨è¿è¡Œï¼Œæ— éœ€ç»´æŠ¤
- âœ… å¯ä»¥æ‰‹åŠ¨è§¦å‘
- âœ… æœ‰è¿è¡Œæ—¥å¿—

## ğŸ“‹ éƒ¨ç½²æ­¥éª¤

### 1. å°†é¡¹ç›®æ¨é€åˆ° GitHub

```bash
# åˆå§‹åŒ– Gitï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
git init

# æ·»åŠ æ‰€æœ‰æ–‡ä»¶
git add .

# æäº¤
git commit -m "Initial commit"

# åˆ›å»º GitHub ä»“åº“åï¼Œæ·»åŠ è¿œç¨‹ä»“åº“
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/ä»“åº“å.git

# æ¨é€åˆ° GitHub
git push -u origin main
```

### 2. é…ç½® GitHub Secrets

åœ¨ GitHub ä»“åº“é¡µé¢ï¼š

1. ç‚¹å‡» `Settings` ï¼ˆè®¾ç½®ï¼‰
2. åœ¨å·¦ä¾§èœå•ç‚¹å‡» `Secrets and variables` â†’ `Actions`
3. ç‚¹å‡» `New repository secret` æ·»åŠ ä»¥ä¸‹å¯†é’¥ï¼š

#### éœ€è¦æ·»åŠ çš„ Secrets:

| Secret åç§° | å€¼ | å¿…éœ€ï¼Ÿ |
|------------|-----|--------|
| `GH_TOKEN` | GitHub Personal Access Token | å¯é€‰ï¼ˆæ¨èï¼‰ |
| `NOTION_API_KEY` | Notion Integration Token | å¿…éœ€ |
| `NOTION_DATABASE_ID` | Notion æ•°æ®åº“ ID | å¿…éœ€ |

### 3. è·å–å„ä¸ª Token

#### GitHub Token (GH_TOKEN)

1. è®¿é—® https://github.com/settings/tokens
2. ç‚¹å‡» `Generate new token` â†’ `Generate new token (classic)`
3. å‹¾é€‰æƒé™ï¼š
   - `public_repo` ï¼ˆè®¿é—®å…¬å…±ä»“åº“ï¼‰
4. ç‚¹å‡» `Generate token`
5. å¤åˆ¶ tokenï¼Œæ·»åŠ åˆ° GitHub Secrets

**æ³¨æ„**ï¼šè¿™ä¸ª token æ˜¯ç”¨æ¥è°ƒç”¨ GitHub API è·å–çƒ­é—¨ä»“åº“çš„ï¼Œä¸æ˜¯ä»“åº“çš„è®¿é—®æƒé™ã€‚

#### Notion API Key

1. è®¿é—® https://www.notion.so/my-integrations
2. ç‚¹å‡» `+ New integration`
3. å¡«å†™åç§°ï¼Œåˆ›å»º
4. å¤åˆ¶ `Internal Integration Token`
5. æ·»åŠ åˆ° GitHub Secrets

#### Notion Database ID

1. åœ¨ Notion ä¸­åˆ›å»ºæ•°æ®åº“ï¼ˆå‚è€ƒä¸» READMEï¼‰
2. è¿æ¥ä½ çš„ Integration åˆ°æ•°æ®åº“ï¼š
   - æ‰“å¼€æ•°æ®åº“é¡µé¢
   - ç‚¹å‡»å³ä¸Šè§’ `...` â†’ `Connections`
   - é€‰æ‹©ä½ çš„ Integration
3. ä» URL è·å–æ•°æ®åº“ IDï¼š
   ```
   https://www.notion.so/workspace/DATABASE_ID?v=...
                                   ^^^^^^^^^^^
   ```
4. æ·»åŠ åˆ° GitHub Secrets

### 4. å¯ç”¨ GitHub Actions

1. æ¨é€ä»£ç åï¼Œè®¿é—®ä»“åº“çš„ `Actions` æ ‡ç­¾
2. å¦‚æœçœ‹åˆ°æç¤ºï¼Œç‚¹å‡» `I understand my workflows, go ahead and enable them`
3. ä½ åº”è¯¥èƒ½çœ‹åˆ°å·¥ä½œæµï¼š`æ¯æ—¥è·å– GitHub çƒ­é—¨ä»“åº“`

### 5. æµ‹è¯•è¿è¡Œ

**æ‰‹åŠ¨è§¦å‘æµ‹è¯•**ï¼š

1. åœ¨ `Actions` æ ‡ç­¾é¡µ
2. ç‚¹å‡»å·¦ä¾§çš„ `æ¯æ—¥è·å– GitHub çƒ­é—¨ä»“åº“`
3. ç‚¹å‡»å³ä¾§çš„ `Run workflow` æŒ‰é’®
4. ç‚¹å‡»ç»¿è‰²çš„ `Run workflow` ç¡®è®¤
5. ç­‰å¾…å‡ ç§’ï¼Œåˆ·æ–°é¡µé¢
6. ç‚¹å‡»æ–°å‡ºç°çš„è¿è¡Œè®°å½•æŸ¥çœ‹æ—¥å¿—

å¦‚æœæˆåŠŸï¼Œä½ åº”è¯¥èƒ½çœ‹åˆ°ï¼š
- âœ“ æˆåŠŸè·å–ä»“åº“åˆ—è¡¨
- âœ“ ä¿å­˜åˆ° Notion æ•°æ®åº“

### 6. éªŒè¯å®šæ—¶ä»»åŠ¡

å·¥ä½œæµä¼šåœ¨æ¯å¤© **åŒ—äº¬æ—¶é—´æ—©ä¸Š 6:00** è‡ªåŠ¨è¿è¡Œã€‚

**æŸ¥çœ‹ä¸‹æ¬¡è¿è¡Œæ—¶é—´**ï¼š
- åœ¨å·¥ä½œæµé¡µé¢å¯ä»¥çœ‹åˆ° cron è¡¨è¾¾å¼
- `0 22 * * *` è¡¨ç¤º UTC 22:00ï¼ˆåŒ—äº¬æ—¶é—´æ—©ä¸Š 6:00ï¼‰

## ğŸ“ å·¥ä½œæµé…ç½®è¯´æ˜

### æ–‡ä»¶ä½ç½®
```
.github/workflows/daily-fetch.yml
```

### è§¦å‘æ–¹å¼

```yaml
on:
  schedule:
    - cron: '0 22 * * *'  # æ¯å¤© UTC 22:00ï¼ˆåŒ—äº¬æ—¶é—´ 6:00ï¼‰
  workflow_dispatch:      # å…è®¸æ‰‹åŠ¨è§¦å‘
```

### ä¿®æ”¹è¿è¡Œæ—¶é—´

ç¼–è¾‘ `.github/workflows/daily-fetch.yml`ï¼š

```yaml
schedule:
  - cron: '0 14 * * *'  # UTC 14:00 = åŒ—äº¬æ—¶é—´ 22:00
```

**å¸¸ç”¨æ—¶é—´å¯¹ç…§è¡¨**ï¼ˆUTC â†’ åŒ—äº¬æ—¶é—´ï¼‰ï¼š

| UTC | åŒ—äº¬æ—¶é—´ | Cron è¡¨è¾¾å¼ |
|-----|---------|------------|
| 22:00 | 06:00 | `0 22 * * *` |
| 00:00 | 08:00 | `0 0 * * *` |
| 02:00 | 10:00 | `0 2 * * *` |
| 06:00 | 14:00 | `0 6 * * *` |
| 10:00 | 18:00 | `0 10 * * *` |
| 14:00 | 22:00 | `0 14 * * *` |

**æç¤º**ï¼šåŒ—äº¬æ—¶é—´ = UTC + 8å°æ—¶

## ğŸ” æŸ¥çœ‹è¿è¡Œæ—¥å¿—

1. è®¿é—®ä»“åº“çš„ `Actions` æ ‡ç­¾
2. ç‚¹å‡»ä»»æ„è¿è¡Œè®°å½•
3. ç‚¹å‡» `fetch-and-save` ä½œä¸š
4. å±•å¼€å„ä¸ªæ­¥éª¤æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

## â— å¸¸è§é—®é¢˜

### å·¥ä½œæµæ²¡æœ‰è‡ªåŠ¨è¿è¡Œ

**å¯èƒ½åŸå› **ï¼š

1. **ä»“åº“ä¸æ´»è·ƒ**
   - GitHub ä¼šæš‚åœä¸æ´»è·ƒä»“åº“çš„å®šæ—¶ä»»åŠ¡
   - è§£å†³ï¼šæ‰‹åŠ¨è§¦å‘ä¸€æ¬¡æˆ–æäº¤ä»£ç 

2. **é»˜è®¤åˆ†æ”¯ä¸æ˜¯ main**
   - å·¥ä½œæµéœ€è¦åœ¨é»˜è®¤åˆ†æ”¯
   - è§£å†³ï¼šæ£€æŸ¥ä»“åº“è®¾ç½®

3. **Actions æœªå¯ç”¨**
   - è§£å†³ï¼šåœ¨ `Settings` â†’ `Actions` â†’ `General` ä¸­å¯ç”¨

### Secret é…ç½®é”™è¯¯

é”™è¯¯ä¿¡æ¯ï¼š`Unauthorized` æˆ– `Could not find database`

**æ£€æŸ¥**ï¼š
1. Secret åç§°æ‹¼å†™æ˜¯å¦æ­£ç¡®ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰
2. Token æ˜¯å¦æœ‰æ•ˆ
3. Notion Integration æ˜¯å¦å·²è¿æ¥åˆ°æ•°æ®åº“

### API é€Ÿç‡é™åˆ¶

é”™è¯¯ä¿¡æ¯ï¼š`API rate limit exceeded`

**è§£å†³**ï¼š
1. ç¡®ä¿é…ç½®äº† `GH_TOKEN`
2. å‡å°‘è¿è¡Œé¢‘ç‡
3. ä½¿ç”¨å¤‡ç”¨ APIï¼ˆä¿®æ”¹ä»£ç ä½¿ç”¨ `fetchGithubTrendingAlternative`ï¼‰

### æ—¶åŒºé—®é¢˜

å¦‚æœè¿è¡Œæ—¶é—´ä¸å¯¹ï¼š
- è®°ä½ GitHub Actions ä½¿ç”¨ UTC æ—¶é—´
- åŒ—äº¬æ—¶é—´ = UTC + 8
- ä½¿ç”¨åœ¨çº¿å·¥å…·è½¬æ¢ï¼šhttps://www.timeanddate.com/worldclock/converter.html

## ğŸ”„ æ›´æ–°å·¥ä½œæµ

ä¿®æ”¹ä»£ç åï¼š

```bash
git add .
git commit -m "æ›´æ–°å·¥ä½œæµé…ç½®"
git push
```

GitHub Actions ä¼šè‡ªåŠ¨ä½¿ç”¨æœ€æ–°çš„ä»£ç ã€‚

## ğŸ“Š ç›‘æ§è¿è¡ŒçŠ¶æ€

### å¯ç”¨é‚®ä»¶é€šçŸ¥

GitHub ä¼šåœ¨å·¥ä½œæµå¤±è´¥æ—¶è‡ªåŠ¨å‘é€é‚®ä»¶é€šçŸ¥ã€‚

**é…ç½®**ï¼š
1. `Settings` â†’ `Notifications`
2. ç¡®ä¿å‹¾é€‰äº† `Actions`

### æ·»åŠ çŠ¶æ€å¾½ç« 

åœ¨ README.md ä¸­æ·»åŠ ï¼š

```markdown
![GitHub Actions](https://github.com/ä½ çš„ç”¨æˆ·å/ä»“åº“å/workflows/æ¯æ—¥è·å–%20GitHub%20çƒ­é—¨ä»“åº“/badge.svg)
```

æ˜¾ç¤ºæ•ˆæœï¼š![Status Badge](https://img.shields.io/badge/build-passing-brightgreen)

## ğŸ’¡ é«˜çº§ç”¨æ³•

### è¿è¡Œå¤šæ¬¡

æ¯å¤©è¿è¡Œä¸¤æ¬¡ï¼ˆæ—©ä¸Šå’Œæ™šä¸Šï¼‰ï¼š

```yaml
schedule:
  - cron: '0 22 * * *'  # åŒ—äº¬æ—¶é—´æ—©ä¸Š 6:00
  - cron: '0 10 * * *'  # åŒ—äº¬æ—¶é—´æ™šä¸Š 18:00
```

### åªåœ¨å·¥ä½œæ—¥è¿è¡Œ

```yaml
schedule:
  - cron: '0 22 * * 1-5'  # å‘¨ä¸€åˆ°å‘¨äº”
```

### ä¿å­˜ç»“æœåˆ°ä»“åº“

ä¿®æ”¹å·¥ä½œæµï¼Œæ·»åŠ æ­¥éª¤ï¼š

```yaml
- name: ä¿å­˜ç»“æœ
  run: |
    mkdir -p results
    echo "$(date): ä»»åŠ¡å®Œæˆ" >> results/history.txt
    git config user.name github-actions
    git config user.email github-actions@github.com
    git add results/
    git commit -m "ä¿å­˜è¿è¡Œç»“æœ $(date)"
    git push
```

## ğŸ‰ æ€»ç»“

ä½¿ç”¨ GitHub Actionsï¼Œä½ å¯ä»¥ï¼š
- âœ… é›¶æˆæœ¬è¿è¡Œè„šæœ¬
- âœ… æ— éœ€ç»´æŠ¤æœåŠ¡å™¨
- âœ… è‡ªåŠ¨åŒ–æ”¶é›†æ•°æ®
- âœ… éšæ—¶æŸ¥çœ‹å†å²è®°å½•

å®Œç¾é€‚åˆä¸ªäººé¡¹ç›®å’Œå­¦ä¹ ç”¨é€”ï¼

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

- [GitHub Actions æ–‡æ¡£](https://docs.github.com/en/actions)
- [Cron è¡¨è¾¾å¼ç”Ÿæˆå™¨](https://crontab.guru/)
- æŸ¥çœ‹é¡¹ç›® Issues

---

**ä¸Šä¸€æ­¥**: [README.md](README.md)
**ä¸‹ä¸€æ­¥**: å¼€å§‹ä½¿ç”¨ï¼ğŸš€


