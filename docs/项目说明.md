# GitHub 热门仓库追踪器 - 项目说明

## 📋 项目概述

这是一个自动化工具，用于：
- 获取 GitHub 每天最热门的仓库（Top 10）
- 可选择保存到 Notion 数据库
- 每天早上 6:00 自动执行
- 支持后台持续运行

## 🏗️ 项目结构

```
github-ranking/
│
├── 📄 核心文件
│   ├── index.js              # 主程序入口，包含定时任务逻辑
│   ├── package.json          # 项目依赖和脚本配置
│   └── src/
│       ├── githubService.js  # GitHub API 调用服务
│       └── notionService.js  # Notion API 调用服务
│
├── 🔧 辅助脚本
│   ├── test.js               # 测试脚本，仅显示数据不保存
│   └── setup-notion.js       # Notion 数据库创建向导
│
├── 💻 Windows 批处理文件（双击运行）
│   ├── install.bat           # 一键安装
│   ├── test.bat              # 一键测试
│   ├── start.bat             # 一键启动
│   └── setup-notion.bat      # Notion 设置向导
│
├── 📖 文档
│   ├── README.md             # 完整文档
│   ├── QUICKSTART.md         # 快速入门
│   ├── WINDOWS使用指南.md    # Windows 专用指南
│   └── 项目说明.md           # 本文件
│
├── ⚙️ 配置文件
│   ├── config.example.env    # 环境变量示例
│   ├── .env                  # 实际环境变量（需手动创建）
│   └── .gitignore           # Git 忽略文件
│
```

## 🔄 工作流程

```
┌─────────────────────────────────────────────────────┐
│                                                       │
│  1. 定时触发 (每天 6:00)                              │
│     或立即执行 (npm start)                            │
│                                                       │
└────────────────┬────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────┐
│                                                       │
│  2. 调用 GitHub API                                   │
│     - 方法1: GitHub Search API (官方)                │
│     - 方法2: GitHub Trending API (第三方)            │
│                                                       │
└────────────────┬────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────┐
│                                                       │
│  3. 获取热门仓库数据                                  │
│     - 仓库名称、描述                                 │
│     - Stars、Forks 数量                              │
│     - 编程语言、URL 等                               │
│                                                       │
└────────────────┬────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────┐
│                                                       │
│  4. 数据输出                                          │
│     ├─ 控制台显示 ✓                                  │
│     └─ 保存到 Notion（如果配置）                     │
│                                                       │
└─────────────────────────────────────────────────────┘
```

## 🛠️ 技术栈

| 技术 | 用途 |
|------|------|
| Node.js | 运行环境 |
| axios | HTTP 请求库 |
| node-cron | 定时任务调度 |
| @notionhq/client | Notion API 客户端 |
| dotenv | 环境变量管理 |

## 📦 依赖包说明

### 核心依赖

- **axios** (^1.6.2)
  - 用于发起 HTTP 请求
  - 调用 GitHub API 获取仓库数据
  
- **node-cron** (^3.0.3)
  - 定时任务调度器
  - 实现每天自动执行功能
  
- **@notionhq/client** (^2.2.15)
  - Notion 官方 JavaScript SDK
  - 用于操作 Notion 数据库
  
- **dotenv** (^16.3.1)
  - 环境变量管理
  - 从 .env 文件加载配置

## 🔌 API 说明

### GitHub API

**方法 1: GitHub Search API（默认）**
- 端点: `https://api.github.com/search/repositories`
- 搜索条件: `created:>=昨天日期`
- 排序: 按 stars 降序
- 速率限制: 
  - 未认证: 60 次/小时
  - 已认证: 5000 次/小时

**方法 2: GitHub Trending API（备用）**
- 端点: `https://ghapi.huchen.dev/repositories`
- 参数: `since=daily`
- 第三方服务，更稳定

### Notion API

- 功能: 创建数据库记录
- 认证: Integration Token
- 速率限制: 约 3 次/秒

## 🎯 使用场景

1. **开发者学习**
   - 每天了解最新热门项目
   - 跟踪技术趋势
   
2. **技术选型**
   - 发现新兴技术栈
   - 评估开源项目热度
   
3. **内容创作**
   - 收集博客素材
   - 分享技术资讯
   
4. **团队协作**
   - 统一的信息源
   - Notion 数据库共享

## ⚙️ 配置选项

### 必需配置

无！可以直接运行查看控制台输出。

### 可选配置

1. **GITHUB_TOKEN**
   - 提高 API 速率限制
   - 访问私有仓库（如需要）

2. **NOTION_API_KEY**
   - 启用 Notion 集成
   - 自动保存数据

3. **NOTION_DATABASE_ID**
   - 指定保存目标
   - 支持多数据库

## 🚀 部署方式

### 本地运行

```bash
npm start
```

优点：简单直接
缺点：需要保持电脑开机

### PM2 后台运行

```bash
pm2 start index.js --name github-trending
```

优点：后台运行，自动重启
缺点：仍需保持机器运行

### 云服务器部署

1. 购买云服务器（阿里云、腾讯云等）
2. 安装 Node.js
3. 克隆项目
4. 使用 PM2 启动
5. 设置开机自启

优点：7x24 小时运行
缺点：需要服务器成本

### GitHub Actions（推荐）

创建 `.github/workflows/daily-fetch.yml`:

```yaml
name: 每日获取 GitHub 热门仓库

on:
  schedule:
    - cron: '0 22 * * *'  # UTC 22:00 = 北京时间 6:00
  workflow_dispatch:

jobs:
  fetch:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      - run: npm install
      - run: node test.js
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          NOTION_API_KEY: ${{ secrets.NOTION_API_KEY }}
          NOTION_DATABASE_ID: ${{ secrets.NOTION_DATABASE_ID }}
```

优点：完全免费，自动运行
缺点：需要配置 GitHub Secrets

## 🎨 自定义扩展

### 修改获取数量

```javascript
// index.js
const repositories = await fetchGithubTrending(20); // 改为 Top 20
```

### 筛选特定语言

```javascript
// src/githubService.js
q: `created:>=${dateString} language:javascript`, // 只获取 JavaScript 仓库
```

### 修改运行时间

```javascript
// index.js
cron.schedule('0 */6 * * *', async () => {
  // 改为每 6 小时运行一次
});
```

### 添加其他通知方式

可以扩展添加：
- 邮件通知
- 企业微信机器人
- Slack 集成
- Discord Webhook

## 📊 数据字段说明

每个仓库包含以下信息：

| 字段 | 说明 | 示例 |
|------|------|------|
| name | 完整仓库名 | "facebook/react" |
| description | 仓库描述 | "A JavaScript library..." |
| stars | 总 Star 数 | 200000 |
| starsToday | 今日新增 | 500 |
| language | 主要编程语言 | "JavaScript" |
| url | 仓库 URL | "https://github.com/..." |
| author | 作者名 | "facebook" |
| forks | Fork 数量 | 40000 |
| createdAt | 创建时间 | "2013-05-24T..." |

## 🔐 安全注意事项

1. **不要提交 .env 文件**
   - 已添加到 .gitignore
   - 包含敏感信息

2. **GitHub Token 权限最小化**
   - 只勾选必需的权限
   - 定期更换 Token

3. **Notion Integration 安全**
   - 只连接必要的数据库
   - 不要分享 API Key

## 📈 版本历史

- **v1.0.0** (2024)
  - 初始版本
  - 支持 GitHub 和 Notion API
  - 定时任务功能
  - Windows 批处理脚本

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

MIT License

---

**开始使用**: 查看 [WINDOWS使用指南.md](WINDOWS使用指南.md)

**详细文档**: 查看 [README.md](README.md)


